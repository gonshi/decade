function response(a){function b(a){return function(){h--,g===h&&response.prototype.fireEvent("FINISH",d,f.data("year")),i[a].finished=!0}}function c(a){var b,c;return function(){b=(g+k)%2===0?"leftColumn":"rightColumn",g++,j&&($(".centerLine").addClass("show"),j=!1),console.log(e[a]),i[a].finished||(i[a].finished=!0,c=$.tmpl(photo,{src:e[a].image.thumbnailLink,title:e[a].title,url:e[a].link}).appendTo(f).addClass(b),setTimeout(function(){c.addClass("show"),g===h&&response.prototype.fireEvent("FINISH",d,f.data("year"))},100))}}0===a.items.length?(decade.loading("on"),setTimeout(function(){$(".photoLayers").find(".year:last-child").remove(),response.prototype.fireEvent("RETRY")},500)):decade.loading("off");for(var d=this,e=a.items,f=$(".photoLayers").find(".year").last(),g=0,h=8,i=[],j=!$(".centerLine").hasClass("show"),k=$(".layer").last().hasClass("rightColumn")?0:1,l=0;l<e.length;l++)i[l]=new Image,i[l].finished=!1,i[l].onload=c(l),i[l].onerror=b(l),i[l].src=e[l].image.thumbnailLink,function(a){setTimeout(function(){i[a].finished||b(a)()},3e3)}(l)}!function(a,b,$,c,d){"use strict";function e(){this._events={}}c=c||{},e.prototype.hasEventListener=function(a){return!!this._events[a]},e.prototype.addEventListener=function(a,b){if(this.hasEventListener(a)){var c=this._events[a];for(var d in c)if(c[d]===b)return;c.push(b)}else this._events[a]=[b];return this},e.prototype.removeEventListener=function(a,b){if(this.hasEventListener(a)){for(var c,d=this._events[a],e=d.length;e--;)d[e]===b&&(c=e);return d.splice(c,1),this}},e.prototype.fireEvent=function(a,b){if(this.hasEventListener(a)){var c=this._events[a],d=$.merge([],c),e=$.merge([],arguments);e.splice(0,2);for(var f in d)d[f].apply(b||this,e)}},c.EventDispatcher=e,a.decade=c}(this,document,jQuery,this.decade),function(a,b,$,c,d){"use strict";function e(a){this.interval=a,this.prevTime=0,this.timer=function(){}}c=c||{},e.prototype.exec=function(a){var b=+new Date,c=b-this.prevTime;clearTimeout(this.timer),c>=this.interval?(this.prevTime=b,a()):this.timer=setTimeout(a,this.interval)},c.Throttle=e,a.decade=c}(this,document,jQuery,this.decade),function(a,b,$,c,d){"use strict";function e(){this.url="https://www.googleapis.com/customsearch/v1?key=AIzaSyD0-vENpzFF5YJLKBbeebqaAX7fXM-qBM0&cx=016489218282066124601:rfqomcxwe0w"}c=c||{};var f,g;f=e.prototype.constructor,e.prototype=new c.EventDispatcher,e.prototype.constructor=f,e.prototype.exec=function(a,b){this.term=a||this.term,this.year=b||this.year;var c=this.url+"&q="+encodeURIComponent(this.term)+"%20"+this.year+"å¹´&searchType=image&num=8";$.ajax({type:"get",url:c}).done(function(a){window.response(a)}),$("<div>").addClass("year").data({year:this.year}).appendTo(".photoLayers")},e.getInstance=function(){return g||(g=new e),g},c.SearchImg=e,a.decade=c}(this,document,jQuery,this.decade);var originalConstructor,photo=['<div class="layer">','<div class="photoContainer">','<p class="title gothic">',"${title}","</p>",'<p class="photo">','<img src="${src}" alt="${title}" data-url=${url}>',"</p>","</div>","</div>"].join("");originalConstructor=response.prototype.constructor,response.prototype=new this.decade.EventDispatcher,response.prototype.constructor=originalConstructor,function(a,b,$,c,d){"use strict";function e(a){this.elm=a}c=c||{};var f;f=e.prototype.constructor,e.prototype=new c.EventDispatcher,e.prototype.constructor=f,e.prototype.search=function(){var a,b=this;this.elm.on("submit",function(c){c.preventDefault(),$(window).scrollTop(0),""!==$(this).find(".year").val()&&(a=""!==$(this).find(".text").val()?$(this).find(".text").val():" ",b.fireEvent("SEARCH",b,a,$(this).find(".year").val()))})},c.SubmitHandler=e,a.decade=c}(this,document,jQuery,this.decade),function(a,b,$,c,d){"use strict";function e(){this.reset(),this.throttle=new c.Throttle(100)}c=c||{};var f,g,h="translateX(340px) rotateX(58deg) rotateY(0deg) rotateZ(31deg)";f=e.prototype.constructor,e.prototype=new c.EventDispatcher,e.prototype.constructor=f,e.prototype.exec=function(){function a(){var a=$(window).scrollTop();for($(".timeline").css({transform:h+" translateY("+-1*a+"px)"}),b=c.thrArr.length-1;b>=0;b--)if(a>c.thrArr[b]){b!==c.curPos&&(c.curPos=b,c.fireEvent("OVER",c,b));break}}var b,c=this;$(window).on("scroll",function(){c.throttle.exec(a)})},e.prototype.setThr=function(a){var b=this.thrArr[this.thrArr.length-1]+a;this.thrArr.push(b)},e.prototype.reset=function(){this.thrArr=[],this.thrArr[0]=parseInt($(".photoLayers").css("margin-top")),this.curPos=0},e.getInstance=function(){return g||(g=new e),g},c.ScrollHandler=e,console.log(e.prototype),a.decade=c}(this,document,jQuery,this.decade),function(a,b,$,c,d){"use strict";c=c||{},c.modal=function(){function a(){e=Math.min(3*j.width(),600),f=Math.min(3*j.height(),400),i.css({width:e,height:f,marginTop:-.5*f,marginLeft:-.5*e}),l.css({marginTop:-.5*f,marginLeft:.5*e+10}),k.css({width:e,marginTop:.5*f+10,marginLeft:-.5*e}),g.css({display:"block"}).animate({opacity:.8}),h.animate({opacity:1})}var b,c,d,e,f,g=$("#modalBack"),h=$("#modalContainer"),i=$("#modalContainer").find(".photo"),j=$("#modalContainer").find(".photo img"),k=$("#modalContainer").find(".title"),l=$("#modalContainer").find(".close");$(document).on("click",".photoContainer img",function(){b=$(this).attr("src"),c=$(this).attr("alt"),d=$(this).data("url"),j.attr({src:b}),h.find(".title").text(c),i.find("a").attr({href:d}),h.css({display:"block"}),j[0].complete?a():j.on("load",a)}),$("#modalBack, #modalContainer").on("click",function(a){var b=$(a.target);("modalContainer"===b.attr("id")||"closeImg"===b.attr("class"))&&$("#modalBack, #modalContainer").animate({opacity:0},function(){$("#modalBack").css({display:"none"}),$("#modalContainer").css({display:"none"})})})},c.loading=function(a){var b=a||"on";"on"===b?($("#modalBack").clearQueue().stop().css({display:"block"}).animate({opacity:.9}),$("#loadingContainer").clearQueue().stop().css({display:"block"}).animate({opacity:1})):("0"===$("#modalContainer").css("opacity")&&$("#modalBack").clearQueue().stop().animate({opacity:0},function(){$("#modalBack").css({display:"none"})}),$("#loadingContainer").clearQueue().stop().animate({opacity:0},function(){$("#loadingContainer").css({display:"none"})}))},c.open=function(){function a(){$(".tutorial .arrow").off("click"),$(b).off("mousewheel"),$(".tutorial").animate({top:-300},1e3,"easeInExpo",function(){$("#modalBack").animate({opacity:0},function(){$("#modalBack").css({display:"none"}),$(".searchForm").trigger("submit")})})}$(".tutorial .arrow").on("click",a),$(b).on("mousewheel",function(b){b.preventDefault(),a()})},a.decade=c}(this,document,jQuery,this.decade),function(a,b,$,c,d){"use strict";c=c||{},$(function(){var b,d,e,f=10,g=-1,h=new c.SubmitHandler($(".searchForm")),i=c.SearchImg.getInstance(),j=c.ScrollHandler.getInstance(),k=$(".searchForm").find(".year"),l=$(".photoLayers"),m=0;location.href.match("localhost")&&(f=1),e=navigator.userAgent.toLowerCase(),(e.match("iphone")||e.match("ipod")||e.match("ipad")||e.match("android"))&&$(".caution").css({display:"block"}),c.modal(),c.open(),h.search(),h.addEventListener("SEARCH",function(a,c){$(".photoLayers").empty(),$(".centerLine").removeClass("show"),j.reset(),m=0,b=a,d=c,i.exec(b,d)}),a.response.prototype.addEventListener("FINISH",function(a){a!==g&&(g=a,j.setThr(l.find(".year").eq(m).height()),$("#scrollArea").css({height:j.thrArr[j.thrArr.length-1]}),m++,f>m&&(a--,i.exec(b,a)))}),a.response.prototype.addEventListener("RETRY",function(){i.exec()}),j.exec(),j.addEventListener("OVER",function(a){k.clearQueue().stop().animate({transform:"scale(1.1)"},150,function(){k.val(l.find(".year").eq(a).data("year")),k.animate({transform:"scale(1.0)"},200)})})}),a.decade=c}(this,document,jQuery,this.decade);